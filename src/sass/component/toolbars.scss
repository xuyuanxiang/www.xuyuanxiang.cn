@import "../common/variables";
@import "../common/mixins";

$navbarBg : #f7f7f8;
$navbarBorderColor: #c4c4c4;
$toolbarBg: $navbarBg;
$toolbarBorderColor: $navbarBorderColor;
$navbarLinksColor: $primary-color;
$tabbarLinksColor: #929292;
$tabbarActiveLinksColor: $primary-color;

.navbar-inner, .toolbar-inner {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  padding: 0 8px;
  @include border-box();
  @include flexbox();
  @include justify-content(space-between);
  @include align-items(center);
}
.navbar-inner.cached {
  display: none;
}
.navbar, .toolbar {
  height: 44px;
  width: 100%;
  @include border-box();
  font-size: 17px;
  position: relative;
  margin: 0;
  z-index: 500;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  b {
    font-weight: 500;
  }
  a.link {
    line-height: 44px;
    height: 44px;
    text-decoration: none;
    position: relative;
    @include flexbox();
    @include justify-content(flex-start);
    @include align-items(center);
    @include transition(300ms);
    html:not(.watch-active-state) &:active, &.active-state {
      opacity: 0.3;
      @include transition(0ms);
    }
    i+span, i+i, span+i, span+span {
      margin-left: 7px;
    }
  }
  a.icon-only {
    min-width: 44px;
    @include flexbox();
    @include justify-content(center);
    @include align-items(center);
    margin: 0;
  }
  i.icon {
    display: block;
  }
}
.navbar {
  left: 0;
  top: 0;
  background: $navbarBg;
  @include hairline(bottom, $navbarBorderColor);
  &.no-border {
    @include hairline-remove(bottom);
  }
  .center {
    font-size: 17px;
    font-weight: 500;
    text-align: center;
    margin: 0;
    position: relative;
    overflow: hidden;
    text-overflow:ellipsis;
    white-space: nowrap;
    line-height: 44px;
    @include flex-shrink(10);
    @include flexbox();
    @include align-items(center);
  }
  .left, .right {
    @include flex-shrink(0);
    @include flexbox();
    @include justify-content(flex-start);
    @include align-items(center);
    @include translate3d(0,0,0);
    a+a {
      margin-left: 15px;
    }
  }
  .left {
    margin-right: 10px;
  }
  .right {
    margin-left: 10px;
  }
  .right:first-child {
    position: absolute;
    right: 8px;
    height: 100%;
  }
  .popup & {
    @include translate3d(0,0,0);
  }
}
.subnavbar {
  height: 44px;
  width: 100%;
  position: absolute;
  left: 0;
  top: 100%;
  margin-top: -1px;
  background: $navbarBg;
  z-index: 20;
  @include border-box();
  padding: 0 8px;
  @include flexbox();
  @include justify-content(space-between);
  @include align-items(center);
  @include hairline(bottom, $navbarBorderColor);
  &.no-border {
    @include hairline-remove(bottom);
  }
  .navbar.no-border & {
    margin-top: 0;
  }
  .navbar-on-left &, .navbar-on-right &{
    pointer-events: none;
  }
  .navbar &, .page & {
    position: absolute;
  }
  .page > & {
    top: 0;
    margin-top: 0;
  }
  > .buttons-row {
    width: 100%;
  }
  .searchbar, &.searchbar {
    position: absolute;
  }
  &.searchbar, .searchbar {
    position: absolute;
  }
  .searchbar {
    left: 0;
    top: 0;
  }
}
.toolbar {
  left: 0;
  bottom: 0;
  background: $toolbarBg;
  @include hairline(top, $toolbarBorderColor);
  &.no-border {
    @include hairline-remove(top);
  }
  a {
    @include flex-shrink(1);
    position: relative;
    white-space: nowrap;
    text-overflow:ellipsis;
    overflow: hidden;
  }
}

// Tabbar
.tabbar {
  color: $tabbarLinksColor;
  z-index: 5001;
  a {
    color: $tabbarLinksColor;
  }
  a.active {
    color: $tabbarActiveLinksColor;
  }
  a.link {
    line-height: 1.4;
  }
  a.tab-link, a.link {
    height: 100%;
    width: 100%;
    @include border-box();
    @include flexbox();
    @include justify-content(center);
    @include align-items(center);
    overflow: visible;
    -webkit-box-flex: 1;
    -ms-flex: 1;
    -webkit-box-orient: vertical;
    -moz-box-orient: vertical;
    -ms-flex-direction: column;
    -webkit-flex-direction: column;
    flex-direction: column;
  }
  i.icon {
    height: 30px;
  }
}
.tabbar-labels {
  height: 50px;
  a.tab-link, a.link {
    padding-top: 4px;
    padding-bottom: 4px;
    height: 100%;
    @include justify-content(space-between);
    i + span {
      margin: 0;
    }
  }
  span.tabbar-label {
    line-height: 1;
    display: block;
    margin: 0;
    letter-spacing: 0.01em;
    font-size: 10px;
    position: relative;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
}
@media all and (min-width:768px) {
  .tabbar {
    .toolbar-inner {
      @include justify-content(center);
    }
    a.tab-link, a.link {
      width: auto;
      min-width: 105px;
    }
  }
  .tabbar-labels {
    height: 56px;
    span.tabbar-label {
      font-size: 14px;
    }
  }
}

// Bars animations
$toolbarDuration: 400ms;

.navbar-from-right-to-center {
  .left, .right, .center, .subnavbar, .fading {
    @include animation(navbarElementFadeIn $toolbarDuration forwards);
  }
  .sliding {
    opacity: 1;
  }

}
.navbar-from-center-to-right {
  .left, .right, .center, .subnavbar, .fading {
    @include animation(navbarElementFadeOut $toolbarDuration forwards);
  }
  .sliding {
    opacity: 0;
  }
  .subnavbar.sliding {
    opacity: 1;
  }
}
@-webkit-keyframes navbarElementFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
@keyframes navbarElementFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
.navbar-from-center-to-left {
  .left, .right, .center, .subnavbar, .fading {
    @include animation(navbarElementFadeOut $toolbarDuration forwards);
  }
  .sliding {
    opacity: 0;
  }
  .subnavbar.sliding {
    opacity: 1;
  }
}
.navbar-from-left-to-center {
  .left, .right, .center, .subnavbar, .fading {
    @include animation(navbarElementFadeIn $toolbarDuration forwards);
  }
  .sliding {
    opacity: 1;
  }
}
.navbar-on-left {
  .left, .right, .center, .subnavbar, .fading {
    opacity: 0;
  }
  .sliding {
    opacity: 0;
  }
  .subnavbar.sliding {
    opacity: 1;
    @include translate3d(-100%,0,0);
  }
}
.navbar-on-right {
  .left, .right, .center, .subnavbar, .fading {
    opacity: 0;
  }
  .sliding {
    opacity: 0;
  }
  .subnavbar.sliding {
    @include translate3d(100%,0,0);
  }
}
@-webkit-keyframes navbarElementFadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}
@keyframes navbarElementFadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}
.navbar-from-right-to-center, .navbar-from-center-to-right, .navbar-from-center-to-left, .navbar-from-left-to-center {
  .left.sliding .back.link .icon {
    @include transition($toolbarDuration);
  }
  .sliding {
    @include transition($toolbarDuration);
    @include animation(none);
  }
}